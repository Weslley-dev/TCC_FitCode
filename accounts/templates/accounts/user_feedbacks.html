{% extends 'user_base.html' %}

{% block title %}Meus Feedbacks - FitCode{% endblock %}

{% block extra_css %}
<style>
    .feedbacks-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .feedbacks-header {
        text-align: center;
        margin-bottom: 30px;
    }
    
    .feedbacks-title {
        font-size: 2rem;
        font-weight: 700;
        color: #222;
        margin-bottom: 8px;
    }
    
    .feedbacks-subtitle {
        color: #666;
        font-size: 1.1rem;
    }
    
    .feedbacks-list {
        display: grid;
        gap: 20px;
    }
    
    .feedback-card {
        background: #fff;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        border: 1px solid #e3e6ee;
        transition: all 0.3s ease;
    }
    
    .feedback-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    }
    
    .feedback-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 15px;
    }
    
    .exercise-info {
        flex: 1;
    }
    
    .exercise-name {
        font-size: 1.2rem;
        font-weight: 600;
        color: #222;
        margin-bottom: 5px;
    }
    
    .exercise-group {
        color: #666;
        font-size: 0.9rem;
    }
    
    .rating-stars {
        display: flex;
        gap: 2px;
        margin-bottom: 10px;
    }
    
    .star {
        width: 16px;
        height: 16px;
        color: #ffc107;
    }
    
    .star.empty {
        color: #ddd;
    }
    
    .feedback-comment {
        color: #555;
        line-height: 1.5;
        margin-bottom: 15px;
    }
    
    .feedback-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.9rem;
        color: #999;
    }
    
    .feedback-actions {
        display: flex;
        gap: 8px;
    }
    
    .btn {
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 0.9rem;
        font-weight: 500;
        text-decoration: none;
        transition: all 0.2s ease;
        border: none;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 4px;
    }
    
    .btn-edit {
        background: #1976d2;
        color: #fff;
    }
    
    .btn-edit:hover {
        background: #1565c0;
        color: #fff;
    }
    
    .btn-delete {
        background: #d32f2f;
        color: #fff;
    }
    
    .btn-delete:hover {
        background: #b71c1c;
        color: #fff;
    }
    
    .btn-secondary {
        background: #f5f5f5;
        color: #666;
        border: 1px solid #ddd;
    }
    
    .btn-secondary:hover {
        background: #e0e0e0;
        color: #333;
    }
    
    /* Botões estilo administrador */
    .btn { 
        padding: 12px 24px; 
        border-radius: 8px; 
        font-size: 1rem; 
        font-weight: 600; 
        cursor: pointer; 
        text-decoration: none; 
        display: inline-flex; 
        align-items: center; 
        gap: 8px; 
        transition: all 0.2s ease;
        border: none;
    }
    
    .btn-primary { 
        background: #3a7bd5; 
        color: #fff; 
    }
    
    .btn-primary:hover { 
        background: #2c5aa0; 
    }
    
    .btn-secondary { 
        background: #6c757d; 
        color: #fff; 
    }
    
    .btn-secondary:hover { 
        background: #5a6268; 
    }
    
    .btn svg {
        width: 18px;
        height: 18px;
    }
    
    .back-btn-container {
        display: flex;
        justify-content: flex-end;
        margin-top: 30px;
        margin-bottom: 20px;
    }
    
    
    .no-feedbacks {
        text-align: center;
        padding: 60px 20px;
        color: #666;
    }
    
    .no-feedbacks svg {
        width: 64px;
        height: 64px;
        color: #ccc;
        margin-bottom: 16px;
    }
    
    .no-feedbacks h3 {
        font-size: 1.5rem;
        margin-bottom: 8px;
        color: #333;
    }
    
    .no-feedbacks p {
        font-size: 1rem;
        margin-bottom: 20px;
    }
    
    .no-feedbacks .btn {
        padding: 12px 24px;
        font-size: 1rem;
    }
    
    /* Responsividade Mobile */
    @media (max-width: 768px) {
        .feedbacks-container {
            padding: 15px;
            max-width: 100%;
        }
        
        .back-btn-container {
            margin-top: 25px;
            margin-bottom: 15px;
        }
        
        .btn {
            padding: 10px 20px;
            font-size: 0.9rem;
        }
        
        .btn svg {
            width: 16px;
            height: 16px;
        }
        
        .feedbacks-header {
            margin-bottom: 20px;
        }
        
        .feedbacks-title {
            font-size: 1.5rem;
        }
        
        .feedbacks-subtitle {
            font-size: 1rem;
        }
        
        .feedbacks-list {
            gap: 15px;
        }
        
        .feedback-card {
            padding: 15px;
        }
        
        .feedback-header {
            flex-direction: column;
            gap: 10px;
            align-items: flex-start;
        }
        
        .exercise-name {
            font-size: 1.1rem;
        }
        
        .exercise-group {
            font-size: 0.85rem;
        }
        
        .rating-stars {
            align-self: flex-start;
        }
        
        .star {
            width: 14px;
            height: 14px;
        }
        
        .feedback-comment {
            font-size: 0.9rem;
            margin-bottom: 12px;
        }
        
        .feedback-meta {
            flex-direction: column;
            align-items: flex-start;
            gap: 8px;
        }
        
        .feedback-actions {
            align-self: flex-start;
            flex-wrap: wrap;
            gap: 6px;
        }
        
        .btn {
            padding: 8px 16px;
            font-size: 0.85rem;
        }
        
        .no-feedbacks {
            padding: 40px 15px;
        }
        
        .no-feedbacks svg {
            width: 48px;
            height: 48px;
        }
        
        .no-feedbacks h3 {
            font-size: 1.3rem;
        }
        
        .no-feedbacks p {
            font-size: 0.9rem;
        }
        
        .no-feedbacks .btn {
            padding: 10px 20px;
            font-size: 0.9rem;
        }
    }
    
    @media (max-width: 480px) {
        .feedbacks-container {
            padding: 10px;
        }
        
        .back-btn-container {
            margin-top: 20px;
            margin-bottom: 12px;
        }
        
        .btn {
            padding: 8px 16px;
            font-size: 0.8rem;
        }
        
        .feedbacks-title {
            font-size: 1.3rem;
        }
        
        .feedbacks-subtitle {
            font-size: 0.9rem;
        }
        
        .feedback-card {
            padding: 12px;
        }
        
        .exercise-name {
            font-size: 1rem;
        }
        
        .exercise-group {
            font-size: 0.8rem;
        }
        
        .star {
            width: 12px;
            height: 12px;
        }
        
        .feedback-comment {
            font-size: 0.85rem;
        }
        
        .feedback-actions {
            flex-direction: column;
            width: 100%;
        }
        
        .btn {
            width: 100%;
            justify-content: center;
        }
        
        .no-feedbacks {
            padding: 30px 10px;
        }
        
        .no-feedbacks svg {
            width: 40px;
            height: 40px;
        }
        
        .no-feedbacks h3 {
            font-size: 1.2rem;
        }
        
        .no-feedbacks p {
            font-size: 0.85rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="feedbacks-container">
    <div class="feedbacks-header">
        <h1 class="feedbacks-title">Meus Feedbacks</h1>
        <p class="feedbacks-subtitle">Gerencie seus feedbacks enviados</p>
    </div>
    
    {% if feedbacks %}
        <div class="feedbacks-list">
            {% for feedback in feedbacks %}
            <div class="feedback-card">
                <div class="feedback-header">
                    <div class="exercise-info">
                        <h3 class="exercise-name">{{ feedback.aparelho.exercise_name }}</h3>
                        <p class="exercise-group">{{ feedback.aparelho.grupo_muscular.name }}</p>
                    </div>
                    <div class="rating-stars">
                        {% for i in "12345" %}
                            <svg class="star {% if i|add:0 > feedback.rating %}empty{% endif %}" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                        {% endfor %}
                        <span style="margin-left: 8px; font-weight: 600;">{{ feedback.rating }}/5</span>
                    </div>
                </div>
                
                {% if feedback.comment %}
                    <div class="feedback-comment">{{ feedback.comment }}</div>
                {% endif %}
                
                <div class="feedback-meta">
                    <span>Enviado em {{ feedback.created_at|date:"d/m/Y H:i" }}</span>
                    <div class="feedback-actions">
                        <a href="{% url 'user_feedback' feedback.aparelho.pk %}" class="btn btn-edit">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                            </svg>
                            Editar
                        </a>
                        <a href="{% url 'delete_feedback' feedback.pk %}" class="btn btn-delete">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3,6 5,6 21,6"/>
                                <path d="M19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"/>
                            </svg>
                            Excluir
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="no-feedbacks">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                <path d="M8 9h8"/>
                <path d="M8 13h6"/>
            </svg>
            <h3>Nenhum feedback enviado</h3>
            <p>Você ainda não enviou nenhum feedback. Que tal avaliar alguns exercícios?</p>
            <a href="{% url 'user_exercises_list' %}" class="btn btn-primary">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                </svg>
                Ver Exercícios
            </a>
        </div>
    {% endif %}
    
    <div class="back-btn-container">
        <a href="{% url 'user_exercises_list' %}" class="btn btn-secondary">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Voltar
        </a>
    </div>
</div>
{% endblock %}
